(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();class Ot{constructor(){this.isMuted=!1,this.audioContext=null;const e="/AppleGame/";this.bgm=new Audio(`${e}audio/bgm.mp3`),this.bgm.loop=!0,this.bgm.volume=.3,this.bgm.addEventListener("error",n=>{console.error("BGM Î°úÎî© Ïã§Ìå®:",n),console.log("ÌååÏùº Í≤ΩÎ°úÎ•º ÌôïÏù∏ÌïòÏÑ∏Ïöî: public/audio/bgm.mp3")}),this.initAudioContext()}initAudioContext(){const e=()=>{this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),document.removeEventListener("click",e),document.removeEventListener("touchstart",e)};document.addEventListener("click",e),document.addEventListener("touchstart",e)}playBGM(){this.isMuted||this.bgm.play().catch(e=>{console.log("BGM ÏûêÎèô Ïû¨ÏÉù Ïã§Ìå®:",e)})}stopBGM(){this.bgm.pause(),this.bgm.currentTime=0}playSuccess(e=0){if(this.isMuted||!this.audioContext)return;const n=this.audioContext,i=n.createOscillator(),o=n.createGain();i.connect(o),o.connect(n.destination);const s=Math.min(e,12),l=Math.pow(2,s*2/12);i.frequency.setValueAtTime(523.25*l,n.currentTime),i.frequency.setValueAtTime(659.25*l,n.currentTime+.05),i.frequency.setValueAtTime(783.99*l,n.currentTime+.1),i.type="sine",o.gain.setValueAtTime(.3,n.currentTime),o.gain.exponentialRampToValueAtTime(.01,n.currentTime+.3),i.start(n.currentTime),i.stop(n.currentTime+.3)}playFail(){if(this.isMuted||!this.audioContext)return;const e=this.audioContext,n=e.createOscillator(),i=e.createGain();n.connect(i),i.connect(e.destination),n.frequency.setValueAtTime(200,e.currentTime),n.frequency.exponentialRampToValueAtTime(100,e.currentTime+.1),n.type="square",i.gain.setValueAtTime(.2,e.currentTime),i.gain.exponentialRampToValueAtTime(.01,e.currentTime+.1),n.start(e.currentTime),n.stop(e.currentTime+.1)}toggleMute(){return this.isMuted=!this.isMuted,this.isMuted?this.bgm.volume=0:(this.bgm.volume=.3,this.bgm.paused&&this.playBGM()),this.isMuted}}const E=17,x=10,yt=120,I=10;let r=50,d=[],L=0,z=yt,y=!1,K=null,M=0,U=!1,p=!1,w=null,g=null,c=null,S=null,V=[];const Wt=200;let B=[],P=0,F=!1;const b={render:[],findHints:[],calculateSum:[],gameLoop:[]};function N(t){return F?{label:t,start:performance.now()}:null}function X(t){if(!t||!F)return;const e=performance.now()-t.start;b[t.label]||(b[t.label]=[]),b[t.label].push(e),b[t.label].length>60&&b[t.label].shift(),e>10&&console.warn(`‚ö†Ô∏è ${t.label} took ${e.toFixed(2)}ms`)}function Rt(){const t={};for(const[e,n]of Object.entries(b)){if(n.length===0)continue;const i=n.reduce((l,u)=>l+u,0)/n.length,o=Math.max(...n),s=Math.min(...n);t[e]={avg:i.toFixed(2),max:o.toFixed(2),min:s.toFixed(2),count:n.length}}return t}function Dt(){const t=localStorage.getItem("appleGameHighScore");return t?parseInt(t,10):0}function $t(t){localStorage.setItem("appleGameHighScore",t.toString())}class zt{constructor(e,n,i){this.x=e,this.y=n,this.color=i;const o=Math.random()*Math.PI*2,s=Math.max(.5,r/50),l=(2+Math.random()*4)*s;this.vx=Math.cos(o)*l,this.vy=Math.sin(o)*l-2*s;const u=Math.max(.5,Math.min(1.5,r/50));this.size=(6+Math.random()*6)*u,this.life=1,this.decay=.015+Math.random()*.015,this.gravity=.15*s}update(){return this.x+=this.vx,this.y+=this.vy,this.vy+=this.gravity,this.vx*=.98,this.life-=this.decay,this.life>0}draw(e){const n=e.globalAlpha;e.globalAlpha=this.life,e.fillStyle=this.color,e.beginPath();for(let i=0;i<5;i++){const o=i*4*Math.PI/5-Math.PI/2,s=this.x+Math.cos(o)*this.size,l=this.y+Math.sin(o)*this.size;i===0?e.moveTo(s,l):e.lineTo(s,l)}e.closePath(),e.fill(),e.globalAlpha=n}}class Gt{constructor(e,n){this.x=e,this.y=n;const i=Math.random()*Math.PI*2,o=10+Math.random()*18;this.vx=Math.cos(i)*o,this.vy=Math.sin(i)*o-8,this.rotation=Math.random()*360,this.rotationSpeed=(Math.random()-.5)*30,this.width=12+Math.random()*18,this.height=10+Math.random()*16;const s=["#FF0000","#FF6B00","#FFD700","#00FF00","#0080FF","#8000FF","#FF00FF","#FF1493"];this.color=s[Math.floor(Math.random()*s.length)],this.life=1,this.decay=.0015+Math.random()*.0015,this.gravity=.1}update(){return this.x+=this.vx,this.y+=this.vy,this.rotation+=this.rotationSpeed,this.vy+=this.gravity,this.vx*=.99,this.life-=this.decay,this.life>0&&this.y<window.innerHeight+100}draw(e){e.save(),e.globalAlpha=this.life,e.translate(this.x,this.y),e.rotate(this.rotation*Math.PI/180),e.shadowColor=this.color,e.shadowBlur=15,e.shadowOffsetX=0,e.shadowOffsetY=0,e.fillStyle=this.color,e.fillRect(-this.width/2,-this.height/2,this.width,this.height),e.restore()}}function Vt(){document.querySelector(".game-container");const t=document.querySelector(".game-header"),e=document.querySelector(".sum-display"),n=document.getElementById("orientationWarning"),i=window.innerWidth<=1024,o=window.innerWidth>window.innerHeight,s=i&&o,l=window.visualViewport?window.visualViewport.height:window.innerHeight,u=window.visualViewport?window.visualViewport.width:window.innerWidth,h=i?16:48,m=n&&!n.classList.contains("hidden")?n.offsetHeight:0;let W,k;if(s){const et=t?t.offsetWidth:100,nt=getComputedStyle(document.documentElement).getPropertyValue("--safe-area-top"),it=getComputedStyle(document.documentElement).getPropertyValue("--safe-area-bottom"),Yt=parseFloat(nt)||0,kt=parseFloat(it)||0,Pt=Math.max(Yt,20),Ht=Math.max(kt,20);W=u-et,k=l-m-Pt-Ht}else{const et=t?t.offsetHeight+(i?8:16):i?60:80,nt=e?e.offsetHeight+(i?8:12):i?48:60,it=i?20:40;W=u-h,k=l-h-et-nt-it-m}const R=E/x;let C=W,D=C/R;D>k&&(D=k,C=D*R);const Ct=20,Ft=60,It=E*Ct,Xt=E*Ft;C=Math.max(It,Math.min(Xt,C)),D=C/R;const At=C/E;return{width:Math.floor(C),height:Math.floor(D),cellSize:At}}function A(){const t=Vt(),e=window.devicePixelRatio||1;f.width=t.width*e,f.height=t.height*e,f.style.width=t.width+"px",f.style.height=t.height+"px",a.scale(e,e),r=t.cellSize,q.width=window.innerWidth,q.height=window.innerHeight,y&&v(),console.log(`Canvas resized: ${t.width}x${t.height}, Cell: ${r.toFixed(1)}px`)}const f=document.getElementById("gameCanvas"),a=f.getContext("2d"),q=document.getElementById("confettiCanvas"),ct=q.getContext("2d");A();const qt=document.getElementById("score"),ot=document.getElementById("timer"),$=document.getElementById("sumDisplay"),dt=document.getElementById("muteBtn"),Z=document.getElementById("fullscreenBtn"),Nt=document.getElementById("restartBtnHeader"),jt=document.getElementById("restartBtnSidebar"),_t=document.getElementById("debugToggleBtnSidebar"),Ut=document.getElementById("startModal"),Kt=document.getElementById("startGameBtn"),G=document.getElementById("gameOverModal"),Zt=document.getElementById("finalScore"),Jt=document.getElementById("highScore"),ut=document.getElementById("newRecordLabel"),Qt=document.getElementById("restartBtn"),te=document.getElementById("debugToggleBtn"),vt=document.getElementById("debugPanel"),ee=document.getElementById("resetHighScoreBtn"),ne=document.getElementById("forceGameOverBtn"),ie=document.getElementById("testConfettiBtn"),oe=document.getElementById("autoRemoveBtn"),mt=document.getElementById("toggleProfilingBtn"),se=document.getElementById("showStatsBtn"),T=new Ot;function wt(){d=[];for(let t=0;t<x;t++){d[t]=[];for(let e=0;e<E;e++)d[t][e]={value:Math.floor(Math.random()*9)+1,isEmpty:!1}}}function J(){wt(),L=0,z=yt,y=!0,M=0,P=Dt(),B=[],Q(),ft(),G.classList.add("hidden"),G.classList.remove("new-record"),T.playBGM(),c=null,S&&clearTimeout(S),K&&clearInterval(K),K=setInterval(()=>{z--,ft(),z<=0&&j()},1e3),S=setTimeout(()=>{bt()},5e3),tt()}function j(){y=!1,clearInterval(K),T.stopBGM(),S&&(clearTimeout(S),S=null),c=null;const t=L>P;t&&(P=L,$t(P),B=[],xt(),tt()),Zt.textContent=L,Jt.textContent=P,t?(ut.classList.remove("hidden"),G.classList.add("new-record")):(ut.classList.add("hidden"),G.classList.remove("new-record")),G.classList.remove("hidden")}function Q(){qt.textContent=L}function ft(){ot.textContent=z,z<=10?ot.style.color="#ff1744":ot.style.color="#ff5722"}function O(t,e){e===0?($.textContent="",$.className="sum-display"):($.textContent=`ÏÑ†ÌÉù ÏòÅÏó≠ Ìï©Í≥Ñ: ${t} (Î∏îÎ°ù ${e}Í∞ú)`,t===I?$.className="sum-display valid":$.className="sum-display invalid")}function Et(t){const e=f.getBoundingClientRect(),n=t.clientX-e.left,i=t.clientY-e.top,o=Math.floor(n/r),s=Math.floor(i/r);return o>=0&&o<E&&s>=0&&s<x?{x:o,y:s}:null}function Mt(t){const e=f.getBoundingClientRect(),n=t.clientX-e.left,i=t.clientY-e.top,o=Math.floor(n/r),s=Math.floor(i/r);return o>=0&&o<E&&s>=0&&s<x?{x:o,y:s}:null}function _(){return!w||!g?null:{startX:Math.min(w.x,g.x),startY:Math.min(w.y,g.y),endX:Math.max(w.x,g.x),endY:Math.max(w.y,g.y)}}function Y(t){if(!t)return{sum:0,count:0};let e=0,n=0;for(let i=t.startY;i<=t.endY;i++)for(let o=t.startX;o<=t.endX;o++)d[i][o].isEmpty||(e+=d[i][o].value,n++);return{sum:e,count:n}}function st(t){for(let e=t.startY;e<=t.endY;e++)for(let n=t.startX;n<=t.endX;n++)d[e][n].isEmpty=!0;c=null}function lt(t,e,n,i){if(V.length>Wt)return;const s=`hsl(${(i-1)*40}, 70%, 60%)`;for(let l=0;l<n;l++)V.push(new zt(t,e,s))}function le(){V=V.filter(t=>t.update())}function re(t){const e=N("renderParticles");V.forEach(n=>n.draw(t)),X(e)}function xt(){console.log("üéâ Ïª®ÌéòÌã∞ ÏãúÏûë! 200Í∞ú ÏÉùÏÑ±");const t=window.innerWidth/2,e=window.innerHeight/2;for(let n=0;n<200;n++)B.push(new Gt(t,e));console.log("Ïª®ÌéòÌã∞ Î∞∞Ïó¥ Í∏∏Ïù¥:",B.length)}function ae(){B=B.filter(t=>t.update())}function ce(){ct.clearRect(0,0,q.width,q.height),B.forEach(t=>t.draw(ct))}function Bt(){const t=N("findAdjacentPairs"),e=[];for(let n=0;n<x;n++)for(let i=0;i<E;i++){if(d[n][i].isEmpty)continue;const o=d[n][i].value,s=I-o;i+1<E&&!d[n][i+1].isEmpty&&d[n][i+1].value===s&&e.push({startX:i,startY:n,endX:i+1,endY:n,size:2}),n+1<x&&!d[n+1][i].isEmpty&&d[n+1][i].value===s&&e.push({startX:i,startY:n,endX:i,endY:n+1,size:2})}return X(t),e}function St(){const t=N("findAllCombinations"),e=12;for(let n=2;n<=e;n++)for(let i=1;i<=n&&i<=x;i++){const o=Math.ceil(n/i);if(!(o>E))for(let s=0;s<=x-i;s++)for(let l=0;l<=E-o;l++){const u={startX:l,startY:s,endX:l+o-1,endY:s+i-1},{sum:h,count:m}=Y(u);if(h===I&&m>=2)return X(t),[{...u,count:m,size:n}]}}return X(t),[]}function bt(){if(!y)return;const t=Bt();if(t.length>0){c=t[0],M=0,v();return}const e=St();if(e.length>0){c=e[0],M=0,v();return}c=null,console.log("ÌûåÌä∏Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.")}function H(){S&&clearTimeout(S),S=setTimeout(()=>{bt()},5e3)}function de(t){return c?t.startX===c.startX&&t.startY===c.startY&&t.endX===c.endX&&t.endY===c.endY:!1}f.addEventListener("mousedown",t=>{if(!y)return;const e=Et(t);e&&(p=!0,w=e,g=e,v())});f.addEventListener("mousemove",t=>{if(!y||!p)return;const e=Et(t);if(e){g=e;const n=_(),{sum:i,count:o}=Y(n);O(i,o),v()}});f.addEventListener("mouseup",t=>{if(!y||!p)return;p=!1;const e=_(),{sum:n,count:i}=Y(e);if(n===I&&i>0){for(let s=e.startY;s<=e.endY;s++)for(let l=e.startX;l<=e.endX;l++)if(!d[s][l].isEmpty){const u=l*r+r/2,h=s*r+r/2,m=3+Math.floor(Math.random()*3);lt(u,h,m,d[s][l].value)}st(e),L+=i,Q(),T.playSuccess(M),M++,H(),d.every(s=>s.every(l=>l.isEmpty))&&j()}else i>0&&(T.playFail(),M=0,c||H());w=null,g=null,O(0,0),v()});f.addEventListener("mouseleave",()=>{p&&(p=!1,w=null,g=null,O(0,0),v())});f.addEventListener("touchstart",t=>{if(!y)return;t.preventDefault();const e=t.touches[0],n=Mt(e);n&&(p=!0,w=n,g=n,v())},{passive:!1});f.addEventListener("touchmove",t=>{if(!y||!p)return;t.preventDefault();const e=t.touches[0],n=Mt(e);if(n){g=n;const i=_(),{sum:o,count:s}=Y(i);O(o,s),v()}},{passive:!1});f.addEventListener("touchend",t=>{if(!y||!p)return;t.preventDefault(),p=!1;const e=_(),{sum:n,count:i}=Y(e);if(n===I&&i>0){for(let s=e.startY;s<=e.endY;s++)for(let l=e.startX;l<=e.endX;l++)if(!d[s][l].isEmpty){const u=l*r+r/2,h=s*r+r/2,m=3+Math.floor(Math.random()*3);lt(u,h,m,d[s][l].value)}st(e),L+=i,Q(),T.playSuccess(M),M++,H(),d.every(s=>s.every(l=>l.isEmpty))&&j()}else i>0&&(T.playFail(),M=0,c||H());w=null,g=null,O(0,0),v()},{passive:!1});f.addEventListener("touchcancel",()=>{p&&(p=!1,w=null,g=null,O(0,0),v())});function v(){const t=N("render");a.fillStyle="#fafafa",a.fillRect(0,0,f.width,f.height);const e=Math.max(12,Math.min(24,r*.48));a.font=`bold ${e}px sans-serif`,a.textAlign="center",a.textBaseline="middle";for(let n=0;n<x;n++)for(let i=0;i<E;i++){const o=d[n][i],s=i*r,l=n*r;if(o.isEmpty)a.fillStyle="#e0e0e0",a.fillRect(s,l,r,r);else{const u=(o.value-1)*40;a.fillStyle=`hsl(${u}, 70%, 85%)`,a.fillRect(s,l,r,r),a.fillStyle="#333",a.fillText(o.value,s+r/2,l+r/2)}}a.strokeStyle="#bbb",a.lineWidth=1,a.beginPath();for(let n=0;n<=E;n++)a.moveTo(n*r,0),a.lineTo(n*r,x*r);for(let n=0;n<=x;n++)a.moveTo(0,n*r),a.lineTo(E*r,n*r);if(a.stroke(),c&&!p){let n=!1;for(let i=c.startY;i<=c.endY;i++){for(let o=c.startX;o<=c.endX;o++)if(!d[i][o].isEmpty){n=!0;break}if(n)break}if(n){const i=c.startX*r,o=c.startY*r,s=(c.endX-c.startX+1)*r,l=(c.endY-c.startY+1)*r;a.fillStyle="rgba(33, 150, 243, 0.25)",a.fillRect(i,o,s,l),a.strokeStyle="#2196f3",a.lineWidth=3,a.setLineDash([10,5]),a.strokeRect(i,o,s,l),a.setLineDash([])}else c=null,H()}if(p&&w&&g){const n=_();if(n){const{sum:i}=Y(n),o=n.startX*r,s=n.startY*r,l=(n.endX-n.startX+1)*r,u=(n.endY-n.startY+1)*r;i===I?a.fillStyle="rgba(76, 175, 80, 0.3)":a.fillStyle="rgba(244, 67, 54, 0.3)",a.fillRect(o,s,l,u),a.strokeStyle=i===I?"#4caf50":"#f44336",a.lineWidth=3,a.strokeRect(o,s,l,u)}}re(a),X(t)}function tt(){const t=N("gameLoop");y||B.length>0?(le(),ae(),v(),ce(),X(t),requestAnimationFrame(tt)):X(t)}dt.addEventListener("click",()=>{const t=T.toggleMute();dt.textContent=t?"üîá":"üîä"});const Lt=!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled),Tt=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;Tt&&!Lt&&(Z.title="iOS: SafariÏóêÏÑú Í≥µÏú† Î≤ÑÌäº ‚Üí Ìôà ÌôîÎ©¥Ïóê Ï∂îÍ∞Ä");Z.addEventListener("click",()=>{if(Tt&&!Lt){alert(`iOSÏóêÏÑúÎäî Safari ÌïòÎã®Ïùò Í≥µÏú† Î≤ÑÌäº(‚Üë)ÏùÑ ÎàåÎü¨
"Ìôà ÌôîÎ©¥Ïóê Ï∂îÍ∞Ä"Î•º ÏÑ†ÌÉùÌïòÎ©¥ Ï†ÑÏ≤¥ÌôîÎ©¥ Î™®ÎìúÎ°ú Ïã§ÌñâÎê©ÎãàÎã§.`);return}if(!document.fullscreenElement&&!document.webkitFullscreenElement){const t=document.documentElement;t.requestFullscreen?t.requestFullscreen().catch(e=>{console.log("Ï†ÑÏ≤¥ÌôîÎ©¥ Ïã§Ìå®:",e)}):t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()});document.addEventListener("fullscreenchange",rt);document.addEventListener("webkitfullscreenchange",rt);document.addEventListener("msfullscreenchange",rt);function rt(){const t=!!(document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement);Z.textContent="‚õ∂",Z.title=t?"Ï†ÑÏ≤¥ÌôîÎ©¥ ÎÇòÍ∞ÄÍ∏∞":"Ï†ÑÏ≤¥ÌôîÎ©¥",setTimeout(()=>{A()},100)}Kt.addEventListener("click",()=>{Ut.classList.add("hidden"),J()});Qt.addEventListener("click",()=>{J()});Nt.addEventListener("click",()=>{J()});jt.addEventListener("click",()=>{J()});te.addEventListener("click",()=>{vt.classList.toggle("hidden")});_t.addEventListener("click",()=>{vt.classList.toggle("hidden")});ee.addEventListener("click",()=>{localStorage.removeItem("appleGameHighScore"),P=0,console.log("‚úÖ ÏµúÍ≥† Ï†êÏàòÍ∞Ä Î¶¨ÏÖãÎêòÏóàÏäµÎãàÎã§."),alert("ÏµúÍ≥† Ï†êÏàòÍ∞Ä Î¶¨ÏÖãÎêòÏóàÏäµÎãàÎã§!")});ne.addEventListener("click",()=>{y?(console.log("‚èπÔ∏è Í≤åÏûÑÏùÑ Í∞ïÏ†úÎ°ú Ï¢ÖÎ£åÌï©ÎãàÎã§."),j()):(console.log("‚ö†Ô∏è Í≤åÏûÑÏù¥ Ïã§Ìñâ Ï§ëÏù¥ ÏïÑÎãôÎãàÎã§."),alert("Í≤åÏûÑÏù¥ Ïã§Ìñâ Ï§ëÏù¥ ÏïÑÎãôÎãàÎã§."))});ie.addEventListener("click",()=>{console.log("üéâ Ïª®ÌéòÌã∞ ÌÖåÏä§Ìä∏ ÏãúÏûë"),B=[],xt(),y||tt(),console.log("ÌòÑÏû¨ Ïª®ÌéòÌã∞ Í∞úÏàò:",B.length)});oe.addEventListener("click",()=>{if(!y){console.log("‚ö†Ô∏è Í≤åÏûÑÏù¥ Ïã§Ìñâ Ï§ëÏù¥ ÏïÑÎãôÎãàÎã§."),alert("Í≤åÏûÑÏù¥ Ïã§Ìñâ Ï§ëÏù¥ ÏïÑÎãôÎãàÎã§.");return}if(U){console.log("‚ö†Ô∏è Ïù¥ÎØ∏ ÏûêÎèô Ï†úÍ±∞Í∞Ä ÏßÑÌñâ Ï§ëÏûÖÎãàÎã§.");return}console.log("ü§ñ ÏûêÎèô Ï†úÍ±∞ ÏãúÏûë (10Î≤à)"),U=!0;let t=0;const e=10,n=()=>{if(t>=e||!y){console.log(`‚úÖ ÏûêÎèô Ï†úÍ±∞ ÏôÑÎ£å (${t}Î≤à ÏÑ±Í≥µ)`),U=!1;return}const i=Bt();let o=null;if(i.length>0)o=i[0];else{const s=St();s.length>0&&(o=s[0])}if(!o){console.log("‚ö†Ô∏è Îçî Ïù¥ÏÉÅ Ï†úÍ±∞Ìï† Î∏îÎ°ùÏù¥ ÏóÜÏäµÎãàÎã§."),U=!1;return}w={x:o.startX,y:o.startY},g={x:o.endX,y:o.endY},p=!0,v(),setTimeout(()=>{const s={startX:o.startX,startY:o.startY,endX:o.endX,endY:o.endY};for(let h=s.startY;h<=s.endY;h++)for(let m=s.startX;m<=s.endX;m++)if(!d[h][m].isEmpty){const W=m*r+r/2,k=h*r+r/2,R=3+Math.floor(Math.random()*3);lt(W,k,R,d[h][m].value)}const{count:l}=Y(s);if(st(s),L+=l,Q(),T.playSuccess(M),M++,de(s)&&(c=null),H(),console.log(`Ï†úÍ±∞ ${t+1}/${e} ÏôÑÎ£å (+${l}Ï†ê, ÏΩ§Î≥¥: ${M})`),t++,p=!1,w=null,g=null,v(),d.every(h=>h.every(m=>m.isEmpty))){console.log("üéä Î™®Îì† Î∏îÎ°ùÏù¥ Ï†úÍ±∞ÎêòÏóàÏäµÎãàÎã§!"),j();return}setTimeout(n,200)},100)};n()});mt.addEventListener("click",()=>{if(F=!F,mt.textContent=F?"üìä ÌîÑÎ°úÌååÏùºÎßÅ ON":"üìä ÌîÑÎ°úÌååÏùºÎßÅ OFF",console.log(`ÌîÑÎ°úÌååÏùºÎßÅ: ${F?"ON":"OFF"}`),F){for(const t in b)b[t]=[];console.log("ÏÑ±Îä• Ï∏°Ï†ï ÏãúÏûë... ÏûêÎèô Ï†úÍ±∞Î•º Ïã§ÌñâÌïòÍ±∞ÎÇò Í≤åÏûÑÏùÑ ÌîåÎ†àÏù¥ÌïòÏÑ∏Ïöî.")}});se.addEventListener("click",()=>{const t=Rt();if(console.log("========== ÏÑ±Îä• ÌÜµÍ≥Ñ (ms) =========="),console.table(t),Object.keys(t).length===0)alert(`ÌîÑÎ°úÌååÏùºÎßÅ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.
"üìä ÌîÑÎ°úÌååÏùºÎßÅ ON" Î≤ÑÌäºÏùÑ ÎàåÎü¨ Ï∏°Ï†ïÏùÑ ÏãúÏûëÌïòÏÑ∏Ïöî.`);else{const e=Object.entries(t).map(([n,i])=>`${n}:
  ÌèâÍ∑† ${i.avg}ms | ÏµúÎåÄ ${i.max}ms | ÏµúÏÜå ${i.min}ms (${i.count}Ìöå)`).join(`

`);alert(`ÏÑ±Îä• ÌÜµÍ≥Ñ (ÏΩòÏÜîÏóêÏÑú ÏûêÏÑ∏Ìûà ÌôïÏù∏):

`+e)}});const ht=document.getElementById("resetOrientationWarningBtn");ht&&ht.addEventListener("click",()=>{localStorage.removeItem("orientationWarningDismissed"),console.log("‚úÖ ÏÑ∏Î°ú Î™®Îìú ÏïàÎÇ¥ Î©îÏãúÏßÄÍ∞Ä Î¶¨ÏÖãÎêòÏóàÏäµÎãàÎã§."),at(),alert(`ÏÑ∏Î°ú Î™®Îìú ÏïàÎÇ¥ Î©îÏãúÏßÄÍ∞Ä Î¶¨ÏÖãÎêòÏóàÏäµÎãàÎã§!
Î™®Î∞îÏùº ÏÑ∏Î°ú Î™®ÎìúÏóêÏÑú Îã§Ïãú ÌëúÏãúÎê©ÎãàÎã§.`)});let gt;window.addEventListener("resize",()=>{clearTimeout(gt),gt=setTimeout(()=>{A(),at()},150)});function at(){const t=document.getElementById("orientationWarning");if(!t)return;const e=t.classList.contains("hidden");if(localStorage.getItem("orientationWarningDismissed")==="true"){t.classList.add("hidden"),e||A();return}const i=window.innerHeight>window.innerWidth;window.innerWidth<=1024&&i?t.classList.remove("hidden"):t.classList.add("hidden");const s=t.classList.contains("hidden");e!==s&&A()}const pt=document.getElementById("closeOrientationWarning");pt&&pt.addEventListener("click",()=>{document.getElementById("orientationWarning").classList.add("hidden"),localStorage.setItem("orientationWarningDismissed","true"),A()});at();window.visualViewport&&window.visualViewport.addEventListener("resize",()=>{A()});wt();v();
