*{margin:0;padding:0;box-sizing:border-box}:root{--safe-area-top: env(safe-area-inset-top, 0px);--safe-area-bottom: env(safe-area-inset-bottom, 0px)}body{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;justify-content:center;align-items:center;min-height:100vh;color:#333;margin:0;padding:0;overflow:hidden;padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)}#app{position:relative;width:100%;height:100vh;display:flex;justify-content:center;align-items:center}@media(max-width:1024px){.game-container{margin-top:0}}.game-container{background:#fff;border-radius:16px;padding:24px;box-shadow:0 20px 60px #0000004d;max-width:95vw;max-height:95vh;display:flex;flex-direction:column;align-items:center}.game-area{display:flex;flex-direction:column;align-items:center;width:100%}@media(max-width:1024px)and (orientation:portrait){.game-container{border-radius:0;padding:12px;max-width:100vw;max-height:100vh;width:100vw;height:100vh}}@media(max-width:1024px)and (orientation:landscape){body{overflow:hidden;height:100vh;height:100dvh;padding:0!important;justify-content:flex-start!important;align-items:flex-start!important}#app{width:100vw;height:100vh;height:100dvh;overflow:hidden;justify-content:flex-start!important;align-items:stretch!important}.game-container{border-radius:0;padding:0!important;max-width:100vw;max-height:100vh;max-height:100dvh;width:100vw;height:100vh;height:100dvh;overflow:hidden}}.game-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding:12px 16px;background:#f8f9fa;border-radius:8px;width:100%;box-sizing:border-box;gap:12px}.header-buttons{display:flex;gap:8px;align-items:center;flex-direction:row}@media(min-width:1025px){.game-container{flex-direction:column!important}.game-header{flex-direction:row!important;width:100%!important;height:auto!important;min-width:unset!important;max-width:unset!important}.game-header-top{display:contents!important}.game-header-bottom{display:none!important}.header-buttons,.score-display,.timer-display{flex-direction:row!important}}@media(max-width:1024px){.game-header{padding:8px 12px;margin-bottom:8px}.game-header-top,.game-header-bottom{display:contents}}@media(max-width:1024px)and (orientation:landscape){.game-container{flex-direction:row!important;padding:0!important;gap:0!important;align-items:stretch}.game-header{flex-direction:column!important;width:auto;min-width:85px;max-width:100px;margin-bottom:0;margin-right:0;padding:8px 4px;justify-content:space-between;gap:10px;height:100vh;height:100dvh;border-radius:0;flex-shrink:0}.game-header-top{display:flex!important;flex-direction:column!important;gap:10px;width:100%}.game-header-bottom{display:flex!important;flex-direction:column!important;gap:6px;width:100%}.score-display,.timer-display{flex-direction:column;text-align:center;font-size:12px;width:100%}.score-display .label,.timer-display .label{font-size:10px;margin-right:0;margin-bottom:2px;display:block}.header-buttons{flex-direction:column!important;width:100%;gap:4px}.icon-btn{width:100%;font-size:16px;padding:4px}.game-area{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;min-width:0;height:100vh;height:100dvh;overflow:hidden;padding-top:calc(env(safe-area-inset-top,0px) + min(8px,env(safe-area-inset-top,0px)));padding-bottom:calc(env(safe-area-inset-bottom,0px) + min(8px,env(safe-area-inset-bottom,0px)));box-sizing:border-box}#gameCanvas{flex-shrink:0}.sum-display{display:none!important}.restart-btn-floating,.debug-toggle-btn{position:static!important;width:100%;height:36px;border-radius:6px;left:auto!important;right:auto!important;bottom:auto!important;display:flex!important;align-items:center;justify-content:center}.restart-btn-floating svg{width:18px;height:18px}.debug-toggle-btn{font-size:16px}}.score-display,.timer-display{font-size:20px;font-weight:600}.label{color:#666;margin-right:8px}#score{color:#4caf50}#timer{color:#ff5722}.icon-btn{background:none;border:none;font-size:24px;cursor:pointer;padding:4px 8px;border-radius:4px;transition:background .2s;display:flex;align-items:center;justify-content:center}.icon-btn:hover{background:#e0e0e0}.icon-btn:active{background:#d0d0d0}#gameCanvas{display:block;border:2px solid #ddd;border-radius:8px;cursor:crosshair;background:#fafafa;touch-action:none;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}@media(max-width:1024px){#gameCanvas{border-width:1px;border-radius:4px}}.sum-display{margin-top:12px;padding:12px;text-align:center;font-size:18px;font-weight:600;border-radius:8px;min-height:48px;transition:all .2s;width:100%;box-sizing:border-box}@media(max-width:1024px){.sum-display{font-size:14px;padding:8px;min-height:40px;margin-top:8px}}.sum-display.valid{background:#c8e6c9;color:#2e7d32}.sum-display.invalid{background:#ffcdd2;color:#c62828}.sum-display:empty{background:transparent}.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;display:flex;justify-content:center;align-items:center;z-index:1000}.modal.new-record{background:#0000004d}.modal.hidden{display:none}.start-modal{min-width:400px;max-width:90vw}.game-title{font-size:48px;margin-bottom:8px;color:#333;font-weight:800}.game-subtitle{font-size:20px;color:#666;margin-bottom:32px;font-weight:500}.game-rules{background:#f8f9fa;padding:20px;border-radius:12px;margin-bottom:32px;text-align:left}.game-rules p{margin:12px 0;font-size:16px;color:#333;line-height:1.6}.start-btn{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:16px 48px;font-size:20px;font-weight:700;border-radius:12px;cursor:pointer;transition:transform .2s,box-shadow .2s;box-shadow:0 4px 12px #667eea66}.start-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px #667eea99}.start-btn:active{transform:translateY(0)}@media(max-width:1024px){.start-modal{min-width:300px;padding:32px 24px}.game-title{font-size:36px}.game-subtitle{font-size:16px;margin-bottom:24px}.game-rules{padding:16px;margin-bottom:24px}.game-rules p{font-size:14px;margin:8px 0}.start-btn{padding:14px 40px;font-size:18px}}@media(max-width:1024px)and (orientation:landscape){.start-modal{padding:16px 20px;max-height:85vh}.game-title{font-size:28px;margin-bottom:4px}.game-subtitle{font-size:14px;margin-bottom:12px}.game-rules{padding:12px;margin-bottom:16px}.game-rules p{font-size:12px;margin:4px 0}.start-btn{padding:10px 32px;font-size:16px}}.modal-content{background:#fff;padding:40px;border-radius:16px;text-align:center;box-shadow:0 10px 40px #0000004d;min-width:300px;max-width:90vw;max-height:90vh;overflow-y:auto}@media(max-width:1024px){.modal-content{padding:24px;min-width:250px}.modal-content h2{font-size:24px}.final-score{font-size:18px}.final-score span{font-size:24px}.new-record-label{font-size:18px}}.modal-content h2{font-size:32px;margin-bottom:20px;color:#333}.final-score{font-size:24px;margin-bottom:24px;color:#666}.final-score span{color:#4caf50;font-weight:700;font-size:32px}.restart-btn{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:14px 32px;font-size:18px;font-weight:600;border-radius:8px;cursor:pointer;transition:transform .2s,box-shadow .2s}.restart-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px #667eea66}.restart-btn:active{transform:translateY(0)}.game-header-bottom{display:none}.restart-btn-floating{position:fixed;left:24px;bottom:24px;width:56px;height:56px;background:#f44336;color:#fff;border:none;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #f4433666;transition:all .3s ease;z-index:100}@media(max-width:1024px)and (orientation:landscape){#restartBtnHeader,#debugToggleBtn{display:none!important}.game-header-bottom{display:flex!important}}#restartBtnSidebar,#debugToggleBtnSidebar{display:none}@media(max-width:1024px)and (orientation:landscape){#restartBtnSidebar,#debugToggleBtnSidebar{display:flex}}.restart-btn-floating:hover{background:#d32f2f;transform:scale(1.1);box-shadow:0 6px 16px #f4433699}.restart-btn-floating:active{transform:scale(.95)}.restart-btn-floating svg{width:28px;height:28px}.new-record-label{font-size:24px;font-weight:700;color:#f44336;margin-bottom:16px;animation:pulse .5s ease-in-out infinite alternate}@keyframes pulse{0%{transform:scale(1)}to{transform:scale(1.1)}}.new-record-label.hidden{display:none}.high-score{font-size:18px;margin-bottom:24px;color:#666}.high-score span{color:#ff9800;font-weight:700;font-size:22px}.confetti-canvas{position:fixed;top:0;left:0;width:100vw;height:100vh;pointer-events:none;z-index:10000}.debug-toggle-btn{position:fixed;right:24px;bottom:24px;width:56px;height:56px;background:#673ab7;color:#fff;border:none;border-radius:50%;font-size:24px;cursor:pointer;box-shadow:0 4px 12px #673ab766;transition:all .3s ease;z-index:100}.debug-toggle-btn:hover{background:#5e35b1;transform:scale(1.1);box-shadow:0 6px 16px #673ab799}.debug-toggle-btn:active{transform:scale(.95)}.debug-panel{position:fixed;right:24px;bottom:90px;background:#fff;border-radius:12px;padding:16px;box-shadow:0 8px 24px #0003;display:flex;flex-direction:column;gap:8px;z-index:99;min-width:200px;transition:all .3s ease;max-height:70vh;overflow-y:auto}@media(max-width:1024px){.debug-panel{right:16px;bottom:70px;min-width:160px;padding:12px;max-height:60vh}.debug-header{font-size:14px}.debug-btn{padding:8px 12px;font-size:12px}}.debug-panel.hidden{display:none}.debug-header{font-size:16px;font-weight:700;color:#673ab7;margin-bottom:8px;padding-bottom:8px;border-bottom:2px solid #f0f0f0}.debug-btn{background:#fff;color:#333;border:2px solid #ddd;padding:10px 16px;font-size:14px;font-weight:600;border-radius:6px;cursor:pointer;transition:all .2s;text-align:left}.debug-btn:hover{background:#f5f5f5;color:#673ab7;border-color:#673ab7;transform:translate(-2px)}.debug-btn:active{transform:scale(.98)}.orientation-warning{position:fixed;top:0;left:0;width:100vw;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;justify-content:center;align-items:center;z-index:9999;padding:12px 16px;box-shadow:0 4px 12px #0000004d;animation:slideDown .3s ease-out}.orientation-warning.hidden{display:none}.orientation-content{display:flex;align-items:center;gap:12px;color:#fff;flex:1;max-width:600px}.rotate-icon{font-size:24px;animation:rotate-device 2s ease-in-out infinite;flex-shrink:0}.orientation-content p{font-size:14px;line-height:1.4;margin:0;font-weight:500;flex:1}.orientation-close{background:#fff3;border:none;color:#fff;width:32px;height:32px;border-radius:50%;cursor:pointer;font-size:20px;display:flex;align-items:center;justify-content:center;transition:all .2s;flex-shrink:0;padding:0;line-height:1}.orientation-close:hover{background:#ffffff4d;transform:scale(1.1)}.orientation-close:active{transform:scale(.95)}@keyframes rotate-device{0%,to{transform:rotate(0)}25%{transform:rotate(-10deg)}75%{transform:rotate(10deg)}}@keyframes slideDown{0%{transform:translateY(-100%);opacity:0}to{transform:translateY(0);opacity:1}}@media(min-width:1025px){.orientation-warning{display:none!important}}:fullscreen .game-container,:-webkit-full-screen .game-container,:-moz-full-screen .game-container,:-ms-fullscreen .game-container{max-width:100vw;max-height:100vh;width:100vw;height:100vh;border-radius:0}@supports (padding: max(0px)){.game-container{padding-left:max(12px,env(safe-area-inset-left));padding-right:max(12px,env(safe-area-inset-right));padding-top:max(12px,env(safe-area-inset-top));padding-bottom:max(12px,env(safe-area-inset-bottom))}}@media(max-width:1024px)and (orientation:landscape){@supports (padding: max(0px)){.game-container{padding:0!important}}}.version-display{position:fixed;bottom:4px;right:4px;font-size:10px;color:#ffffff80;background:#0000004d;padding:2px 6px;border-radius:4px;z-index:9999;pointer-events:none;font-family:monospace}@media(max-width:1024px)and (orientation:landscape){.version-display{right:auto;left:4px}}@media(max-width:1024px){.score-display,.timer-display{font-size:16px}.label{font-size:14px}}@media(max-width:1024px){.restart-btn-floating,.debug-toggle-btn{width:48px;height:48px;bottom:16px}.restart-btn-floating{left:16px}.debug-toggle-btn{right:16px}.restart-btn-floating svg{width:24px;height:24px}.debug-toggle-btn{font-size:20px}}
